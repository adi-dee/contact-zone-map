<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@300;400;600&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Contact Zone Map</title>
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/style.css">
</head>
<body>

<div class="map-container">
  <div id="map"></div>

<!-- Collapsible About Panel -->
<!-- Minimal About Button / Panel -->
<div id="aboutPanel" class="about-panel collapsed">
  <button class="about-toggle" aria-label="Open info">
    <span class="icon">&#9776;</span>
  </button>

  <div class="about-content">
    <div class="about-header">
      <span class="icon close-icon">&times;</span>
    </div>

    <!-- Tab buttons -->
    <div class="about-tabs">
      <button class="tab active" data-tab="contribute">How to Contribute</button>
      <button class="tab" data-tab="about">About the Map</button>
    </div>

    <!-- Tab contents -->
    <div class="tab-content active" data-tab="contribute">
      <div class="how-to-contribute">
        <h4>How to contribute:</h4>
        <ol>
          <li>Click on the map to select a location connected to your experience.</li>
          <li>
            Fill in the short form with your nickname, story, and (optionally) an image and email address.
            <br><small>The email will not be made public. It will be kept securely in our system so that the TCZ team can contact you if we’d like to learn more about your contribution.</small>
          </li>
          <li>Submit your entry. Your pin will be reviewed by our admin before becoming public.</li>
          <li>
            You can add names of places, cities, or streets directly on the map.
            (A search bar for specific places or coordinates may be added in future updates.)
          </li>
        </ol>
      </div>
    </div>

    <div class="tab-content" data-tab="about">
      <div class="about-text">
        <p>
          <strong>A Contact Zone</strong> is a social and cultural space where diverse and often conflicting perspectives,
          experiences, and histories come into contact, co-exist, and are negotiated.
        </p>
        <p>
          The “Mapping the Contact Zone” interactive map invites you to reflect on moments in your own life where you have
          experienced such encounters – times of dialogue, difference, or transformation through meeting others.
          By sharing your story, you help visualize how contact zones appear in everyday life, across cultures, and within communities.
        </p>
        <p>
          This map is part of the <em>Training for the Contact Zone (TCZ)</em> project, an Erasmus+ initiative co-funded by the European Union.
          TCZ develops training programs that help cultural practitioners, educators, and activists learn to facilitate Contact Zones.
        </p>
        <p>
          Your contribution adds to this shared learning process, showing how Contact Zones can emerge anywhere – in families, classrooms,
          workplaces, or public life – wherever people meet across lines of difference and create new understandings together.
        </p>
      </div>
    </div>
  </div>
</div>


  <div id="contactZoneForm" class="contact-zone-form collapsed">
  <div class="form-toggle">
    <span class="arrow">&#x25B2;</span> <!-- up arrow -->
    <span>Add Your Contact Zone Story</span>
  </div>
  <form id="pinForm" class="form-content">
    <input type="text" id="nickname" placeholder="Nickname*" required>
    <textarea id="story" placeholder="Contact Zone Story (up to 92 notes)*" required></textarea>

    <label for="image">Upload Image (jpg/gif/png)</label>
    <input type="file" id="image" accept="image/*">

    <input type="email" id="email" placeholder="Email (not public)">
    <label class="checkbox">
      <input type="checkbox" id="approval"> I hereby approve to publish this data on the contact zone website...
    </label>

    <input type="text" id="lat" placeholder="Latitude" required>
    <input type="text" id="lng" placeholder="Longitude" required>
    <button type="submit" class="send-btn" disabled>SEND ➤</button>
  </form>
</div>
<footer class="map-footer">
  © <a href="https://www.openstreetmap.org/" target="_blank" rel="noopener">OpenStreetMap</a> & 
  <a href="https://carto.com/" target="_blank" rel="noopener">CARTO</a> 
  | © Built & Design by <a href="mailto:didiaviram@gmail.com">Adi Aviram</a>
</footer>

</div>

<!-- Leaflet -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Supabase + Map Logic -->

<script type="module" src="main.js"></script>

</body>
</html>
